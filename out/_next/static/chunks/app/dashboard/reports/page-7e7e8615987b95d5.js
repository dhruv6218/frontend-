(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5589],{1260:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(5155),s=r(2115),l=r(7347);function i(e){let{columns:t,data:r,pageSize:i=8,searchable:a=!0}=e,[o,d]=(0,s.useState)(1),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)("asc"),[h,p]=(0,s.useState)(""),f=(0,s.useMemo)(()=>{let e=h.trim().toLowerCase(),t=r;return e&&(t=t.filter(t=>Object.values(t).some(t=>String(t).toLowerCase().includes(e)))),c&&(t=[...t].sort((e,t)=>{let r=e[c],n=t[c];return r===n?0:"asc"===x?String(r)>String(n)?1:-1:String(r)<String(n)?1:-1})),t},[r,h,c,x]),g=Math.max(1,Math.ceil(f.length/i)),b=(o-1)*i,v=f.slice(b,b+i);return(0,n.jsxs)("div",{className:"w-full",children:[a&&(0,n.jsx)("div",{className:"mb-2 flex items-center",children:(0,n.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,n.jsx)(l.In,{icon:"mdi:magnify",width:18,className:"absolute left-2 top-1/2 -translate-y-1/2 text-neutral-500"}),(0,n.jsx)("input",{value:h,onChange:e=>{p(e.target.value),d(1)},placeholder:"Search…",className:"pl-7 pr-2 py-1.5 text-sm rounded-md border border-neutral-200/70 bg-white/80 w-full"})]})}),(0,n.jsx)("div",{className:"overflow-auto border border-neutral-200/70 rounded-lg",children:(0,n.jsxs)("table",{className:"min-w-full text-sm",children:[(0,n.jsx)("thead",{className:"bg-neutral-50",children:(0,n.jsx)("tr",{children:t.map(e=>(0,n.jsx)("th",{className:"text-left font-normal px-3 py-2 border-b border-neutral-200/70",children:(0,n.jsxs)("button",{className:"inline-flex items-center gap-1 hover:underline",onClick:()=>{c===e.key&&m(e=>"asc"===e?"desc":"asc"),u(e.key)},children:[(0,n.jsx)("span",{children:e.header}),c===e.key&&(0,n.jsx)(l.In,{icon:"asc"===x?"mdi:arrow-up":"mdi:arrow-down",width:14})]})},String(e.key)))})}),(0,n.jsx)("tbody",{children:v.map((e,r)=>(0,n.jsx)("tr",{className:"odd:bg-white even:bg-neutral-50/60",children:t.map(t=>{var r;return(0,n.jsx)("td",{className:"px-3 py-2 border-b border-neutral-200/60",children:t.render?t.render(e):String(null!=(r=e[t.key])?r:"")},String(t.key))})},r))})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,n.jsxs)("p",{className:"text-xs text-neutral-500",children:["Page ",o," of ",g]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:1===o,onClick:()=>d(e=>Math.max(1,e-1)),children:"Prev"}),(0,n.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:o===g,onClick:()=>d(e=>Math.min(g,e+1)),children:"Next"})]})]})]})}},3850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(5155),s=r(6310),l=r(5886),i=r(1260),a=r(6874),o=r.n(a),d=r(2115),c=r(7347),u=r(9984),x=r(7813);function m(){let[e,t]=(0,d.useState)([]),[r,a]=(0,d.useState)(!1),[m,h]=(0,d.useState)("30"),[p,f]=(0,d.useState)("All"),[g,b]=(0,d.useState)([]),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Date.now().toString();b(n=>[...n,{id:r,message:e,type:t}])};async function j(){let e=await u.G.reports.list(),r=new Date;t(e.map(e=>{let t=Math.ceil((new Date(e.expires_at).getTime()-r.getTime())/864e5);return{id:e.id,vendor:e.vendor,check:e.type,risk:e.risk_level,status:t<0?"Expired":"Active",date:new Date(e.created_at).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),expires_at:e.expires_at,days_remaining:t}}))}async function y(){a((await u.G.integrations.getDriveStatus()).connected)}(0,d.useEffect)(()=>{j(),y()},[]);let w=e.filter(e=>{let t="All"===p||e.status===p,r=parseInt(m),n=new Date(e.date),s=new Date;s.setDate(s.getDate()-r);let l=n>=s;return t&&l}),N=async e=>{try{await u.G.reports.saveToDrive(e),v("Report saved to Google Drive successfully!","success")}catch(e){v("Failed to save to Drive. Please ensure Drive is connected.","error")}},[k,S]=(0,d.useState)(null),[C,D]=(0,d.useState)(null);async function E(e){D(e),S(null);try{await new Promise(e=>setTimeout(e,1e3)),S("".concat(e.toUpperCase()," ready: #mock-url"))}catch(e){S(e.message)}finally{D(null)}}return(0,n.jsx)(s.A,{allowedRoles:["user"],children:(0,n.jsxs)(l.A,{title:"Reports",subtitle:"Browse and filter verification results",children:[(0,n.jsxs)("div",{className:"mb-6 rounded-xl border border-blue-200 bg-blue-50 p-4 flex items-start gap-3",children:[(0,n.jsx)(c.In,{icon:"mdi:information-outline",width:20,className:"text-blue-600 flex-shrink-0 mt-0.5"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Reports are stored for 7 days in Ravono"}),(0,n.jsx)("p",{className:"text-xs text-blue-700",children:"Please connect Google Drive to keep a permanent copy of your reports. Reports older than 7 days will be automatically deleted."}),!r&&(0,n.jsx)(o(),{href:"/dashboard/integrations",className:"inline-flex items-center gap-2 mt-2 text-xs font-medium text-blue-600 hover:text-blue-700",children:"Connect Google Drive →"})]})]}),(0,n.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center bg-white p-4 rounded-xl border border-neutral-200/70 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"appearance-none pl-3 pr-8 py-2 rounded-lg border border-neutral-200 bg-neutral-50 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20",children:[(0,n.jsx)("option",{value:"All",children:"All Statuses"}),(0,n.jsx)("option",{value:"Active",children:"Active"}),(0,n.jsx)("option",{value:"Expired",children:"Expired"})]}),(0,n.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:(0,n.jsx)(c.In,{icon:"mdi:chevron-down",width:16})})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"appearance-none pl-3 pr-8 py-2 rounded-lg border border-neutral-200 bg-neutral-50 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20",children:[(0,n.jsx)("option",{value:"30",children:"Last 30 Days"}),(0,n.jsx)("option",{value:"7",children:"Last 7 Days"}),(0,n.jsx)("option",{value:"1",children:"Today"})]}),(0,n.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:(0,n.jsx)(c.In,{icon:"mdi:chevron-down",width:16})})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{placeholder:"Search vendor...",className:"pl-9 pr-3 py-2 rounded-lg border border-neutral-200 bg-neutral-50 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20 w-48"}),(0,n.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,n.jsx)(c.In,{icon:"mdi:magnify",width:16})})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("button",{disabled:"csv"===C,onClick:()=>void E("csv"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-neutral-200 hover:bg-neutral-50 transition-colors",children:[(0,n.jsx)(c.In,{icon:"mdi:file-delimited-outline",width:18,className:"text-green-600"}),"csv"===C?"Exporting...":"CSV"]}),(0,n.jsxs)("button",{disabled:"pdf"===C,onClick:()=>void E("pdf"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-neutral-200 hover:bg-neutral-50 transition-colors",children:[(0,n.jsx)(c.In,{icon:"mdi:file-pdf-box",width:18,className:"text-red-600"}),"pdf"===C?"Exporting...":"PDF"]})]})]}),k&&(0,n.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm flex items-center gap-2",children:[(0,n.jsx)(c.In,{icon:"mdi:check-circle",width:16}),k]}),(0,n.jsx)("div",{className:"bg-white rounded-xl border border-neutral-200/70 shadow-sm overflow-hidden",children:(0,n.jsx)(i.A,{columns:[{key:"id",header:"Report ID"},{key:"vendor",header:"Vendor Name"},{key:"check",header:"Check Type"},{key:"risk",header:"Risk Score",render:e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-16 h-2 rounded-full bg-neutral-100 overflow-hidden",children:(0,n.jsx)("div",{className:"h-full rounded-full ".concat(e.risk>50?"bg-red-500":e.risk>20?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(e.risk,"%")}})}),(0,n.jsxs)("span",{className:"text-xs font-semibold ".concat(e.risk>50?"text-red-600":e.risk>20?"text-yellow-600":"text-green-600"),children:[e.risk,"/100"]})]})},{key:"status",header:"Status",render:e=>(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("Active"===e.status?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"),children:e.status})},{key:"date",header:"Date"},{key:"id",header:"Actions",render:e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o(),{href:"/dashboard/reports/".concat(e.id),className:"text-neutral-400 hover:text-orange-600 transition-colors",title:"View Report",children:(0,n.jsx)(c.In,{icon:"mdi:eye-outline",width:18})}),r&&"Active"===e.status&&(0,n.jsx)("button",{onClick:()=>N(e.id),className:"text-neutral-400 hover:text-green-600 transition-colors",title:"Save to Google Drive",children:(0,n.jsx)(c.In,{icon:"mdi:google-drive",width:18})})]})}],data:w})}),(0,n.jsx)(x.N,{toasts:g,removeToast:e=>{b(t=>t.filter(t=>t.id!==e))}})]})})}},7813:(e,t,r)=>{"use strict";r.d(t,{N:()=>d});var n=r(5155),s=r(2115),l=r(5206),i=r(9114),a=r(7347);function o(e){let{message:t,type:r="info",duration:i=5e3,onClose:o}=e;(0,s.useEffect)(()=>{let e=setTimeout(()=>{o()},i);return()=>clearTimeout(e)},[i,o]);let d={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-600"},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"}}[r];return(0,n.jsxs)(l.P.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"fixed bottom-6 right-6 z-50 max-w-md ".concat(d.bg," ").concat(d.border," border rounded-lg shadow-lg p-4 flex items-start gap-3"),role:"alert",children:[(0,n.jsx)(a.In,{icon:{success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"}[r],width:20,className:"".concat(d.icon," flex-shrink-0 mt-0.5")}),(0,n.jsx)("p",{className:"flex-1 text-sm font-medium ".concat(d.text),children:t}),(0,n.jsx)("button",{onClick:o,className:"".concat(d.text," hover:opacity-70 transition-opacity"),"aria-label":"Close notification",children:(0,n.jsx)(a.In,{icon:"mdi:close",width:18})})]})}function d(e){let{toasts:t,removeToast:r}=e;return(0,n.jsx)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2",children:(0,n.jsx)(i.N,{children:t.map(e=>(0,n.jsx)(o,{message:e.message,type:e.type,onClose:()=>r(e.id)},e.id))})})}},9114:(e,t,r)=>{"use strict";r.d(t,{N:()=>v});var n=r(5155),s=r(2115),l=r(869),i=r(2885),a=r(7494),o=r(845),d=r(7351),c=r(1508);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class x extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,d.s)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m(e){let{children:t,isPresent:r,anchorX:l,root:i}=e,a=(0,s.useId)(),o=(0,s.useRef)(null),d=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=(0,s.useContext)(c.Q),h=function(...e){return s.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=u(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(o,null==t?void 0:t.ref);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:s,right:c}=d.current;if(r||!o.current||!e||!t)return;o.current.dataset.motionPopId=a;let u=document.createElement("style");m&&(u.nonce=m);let x=null!=i?i:document.head;return x.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===l?"left: ".concat(s):"right: ".concat(c),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{x.contains(u)&&x.removeChild(u)}},[r]),(0,n.jsx)(x,{isPresent:r,childRef:o,sizeRef:d,children:s.cloneElement(t,{ref:h})})}let h=e=>{let{children:t,initial:r,isPresent:l,onExitComplete:a,custom:d,presenceAffectsLayout:c,mode:u,anchorX:x,root:h}=e,f=(0,i.M)(p),g=(0,s.useId)(),b=!0,v=(0,s.useMemo)(()=>(b=!1,{id:g,initial:r,isPresent:l,custom:d,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;a&&a()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[l,f,a]);return c&&b&&(v={...v}),(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[l]),s.useEffect(()=>{l||f.size||!a||a()},[l]),"popLayout"===u&&(t=(0,n.jsx)(m,{isPresent:l,anchorX:x,root:h,children:t})),(0,n.jsx)(o.t.Provider,{value:v,children:t})};function p(){return new Map}var f=r(2082);let g=e=>e.key||"";function b(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let v=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:u="sync",propagate:x=!1,anchorX:m="left",root:p}=e,[v,j]=(0,f.xQ)(x),y=(0,s.useMemo)(()=>b(t),[t]),w=x&&!v?[]:y.map(g),N=(0,s.useRef)(!0),k=(0,s.useRef)(y),S=(0,i.M)(()=>new Map),[C,D]=(0,s.useState)(y),[E,I]=(0,s.useState)(y);(0,a.E)(()=>{N.current=!1,k.current=y;for(let e=0;e<E.length;e++){let t=g(E[e]);w.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[E,w.length,w.join("-")]);let R=[];if(y!==C){let e=[...y];for(let t=0;t<E.length;t++){let r=E[t],n=g(r);w.includes(n)||(e.splice(t,0,r),R.push(r))}return"wait"===u&&R.length&&(e=R),I(b(e)),D(y),null}let{forceRender:P}=(0,s.useContext)(l.L);return(0,n.jsx)(n.Fragment,{children:E.map(e=>{let t=g(e),s=(!x||!!v)&&(y===E||w.includes(t));return(0,n.jsx)(h,{isPresent:s,initial:(!N.current||!!o)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,root:p,onExitComplete:s?void 0:()=>{if(!S.has(t))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null==P||P(),I(k.current),x&&(null==j||j()),d&&d())},anchorX:m,children:e},t)})})}},9510:(e,t,r)=>{Promise.resolve().then(r.bind(r,3850))}},e=>{var t=t=>e(e.s=t);e.O(0,[5206,7347,6874,8231,8441,1684,7358],()=>t(9510)),_N_E=e.O()}]);