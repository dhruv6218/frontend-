(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1654],{5943:(e,t,a)=>{"use strict";a.d(t,{I:()=>i,s:()=>l});var s=a(8097),n=a(2085);let r=(0,n.createContext)(null),c=async e=>{let t=await fetch("/locales/".concat(e,".json"),{cache:"force-cache"});try{let e=await t.json();return null!=e?e:{}}catch(e){return{}}};function i(e){let{children:t}=e,[a,i]=(0,n.useState)(()=>localStorage.getItem("rvn_locale")||"en"),[l,d]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=!0;(async()=>{let t=await c(a);e&&d(t)})();try{localStorage.setItem("rvn_locale",a)}catch(e){}try{document.documentElement.setAttribute("lang",a)}catch(e){}return()=>{e=!1}},[a]);let o=(0,n.useMemo)(()=>e=>{var t;return null!=(t=l[e])?t:e},[l]),u=(0,n.useMemo)(()=>({locale:a,setLocale:i,t:o}),[a,o]);return(0,s.jsx)(r.Provider,{value:u,children:t})}function l(){let e=(0,n.useContext)(r);if(!e)throw Error("useI18n must be used within LanguageProvider");return e}},5985:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(8097),n=a(5806),r=a(5189),c=a(2085),i=a(5943),l=a(3563);function d(){let{t:e}=(0,i.s)(),[t,a]=(0,c.useState)([]),[d,o]=(0,c.useState)(null),[u,m]=(0,c.useState)({inApp:!0,email:!0,v:!0,b:!0,s:!0,dndStart:"22:00",dndEnd:"07:00"});async function x(){a((await l.G.notifications.list()).map(e=>{var t;return{id:String(e.id),text:String(null!=(t=e.message)?t:""),read:!!e.read}}))}async function h(){try{await l.G.notifications.markAllRead(),o("All notifications marked as read."),await x()}catch(e){o(e.message)}}async function p(){try{await l.G.notifications.updatePrefs(u),o("Preferences saved.")}catch(e){o(e.message)}}return(0,c.useEffect)(()=>{x()},[]),(0,s.jsx)(n.A,{allowedRoles:["user"],children:(0,s.jsx)(r.A,{title:"Notifications",subtitle:"Manage read/unread vendor events",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-neutral-200/70 bg-white/80 p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e("notifications.preferences")}),(0,s.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[(0,s.jsxs)("label",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e("notifications.inApp")}),(0,s.jsx)("input",{type:"checkbox",checked:u.inApp,onChange:e=>m(t=>({...t,inApp:e.target.checked}))})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e("notifications.email")}),(0,s.jsx)("input",{type:"checkbox",checked:u.email,onChange:e=>m(t=>({...t,email:e.target.checked}))})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:e("notifications.categories")}),(0,s.jsxs)("label",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e("notifications.category.verification")}),(0,s.jsx)("input",{type:"checkbox",checked:u.v,onChange:e=>m(t=>({...t,v:e.target.checked}))})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e("notifications.category.billing")}),(0,s.jsx)("input",{type:"checkbox",checked:u.b,onChange:e=>m(t=>({...t,b:e.target.checked}))})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e("notifications.category.support")}),(0,s.jsx)("input",{type:"checkbox",checked:u.s,onChange:e=>m(t=>({...t,s:e.target.checked}))})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:e("notifications.dnd")}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"time",value:u.dndStart,onChange:e=>m(t=>({...t,dndStart:e.target.value})),className:"px-2 py-1 rounded border border-neutral-200/70"}),(0,s.jsx)("input",{type:"time",value:u.dndEnd,onChange:e=>m(t=>({...t,dndEnd:e.target.value})),className:"px-2 py-1 rounded border border-neutral-200/70"})]}),(0,s.jsx)("button",{onClick:()=>void p(),className:"mt-2 w-full px-3 py-2 text-sm rounded-md border border-neutral-200/70",children:e("notifications.save")})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("button",{onClick:()=>void h(),className:"px-3 py-2 text-sm rounded-md border border-neutral-200/70",children:"Mark all as read"})}),d&&(0,s.jsx)("p",{className:"text-xs mb-2",children:d}),(0,s.jsx)("ul",{className:"space-y-2 text-sm",children:t.map(e=>(0,s.jsx)("li",{className:"rounded-md border px-3 py-2 ".concat(e.read?"border-neutral-200/70 bg-white/60":"border-orange-200 bg-orange-50"),children:e.text},e.id))})]})]})})})}},7779:(e,t,a)=>{Promise.resolve().then(a.bind(a,5985))}},e=>{var t=t=>e(e.s=t);e.O(0,[9765,5366,1780,8292,7349,1958,7358],()=>t(7779)),_N_E=e.O()}]);