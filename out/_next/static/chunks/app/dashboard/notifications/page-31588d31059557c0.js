(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1654],{4361:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),n=s(6310),r=s(5886),c=s(2115),d=s(9647),l=s(9984);function i(){let{t:e}=(0,d.s)(),[t,s]=(0,c.useState)([]),[i,o]=(0,c.useState)(null),[u,m]=(0,c.useState)({inApp:!0,email:!0,lowCreditsWarning:!0,bulkJobFinished:!0,newReportReady:!0,productUpdates:!0,dndStart:"22:00",dndEnd:"07:00"});async function x(){s((await l.G.notifications.list()).map(e=>{var t;return{id:String(e.id),text:String(null!=(t=e.message)?t:""),read:!!e.read}}))}async function h(){try{await l.G.notifications.markAllRead(),o("All notifications marked as read."),await x()}catch(e){o(e.message)}}async function p(){try{await l.G.notifications.updatePrefs(u),o("Preferences saved.")}catch(e){o(e.message)}}return(0,c.useEffect)(()=>{x()},[]),(0,a.jsx)(n.A,{allowedRoles:["user"],children:(0,a.jsx)(r.A,{title:"Notifications",subtitle:"Manage read/unread vendor events",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border border-neutral-200/70 bg-white/80 p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e("notifications.preferences")}),(0,a.jsxs)("div",{className:"mt-2 space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-2 font-medium",children:"Notification Channels"}),(0,a.jsxs)("label",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{children:"In-App Notifications"}),(0,a.jsx)("input",{type:"checkbox",checked:u.inApp,onChange:e=>m(t=>({...t,inApp:e.target.checked})),className:"rounded"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Email Notifications"}),(0,a.jsx)("input",{type:"checkbox",checked:u.email,onChange:e=>m(t=>({...t,email:e.target.checked})),className:"rounded"})]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-neutral-200",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-2 font-medium",children:"Notification Types"}),(0,a.jsxs)("label",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{children:"Low Credits Warning"}),(0,a.jsx)("input",{type:"checkbox",checked:u.lowCreditsWarning,onChange:e=>m(t=>({...t,lowCreditsWarning:e.target.checked})),className:"rounded"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{children:"Bulk Job Finished"}),(0,a.jsx)("input",{type:"checkbox",checked:u.bulkJobFinished,onChange:e=>m(t=>({...t,bulkJobFinished:e.target.checked})),className:"rounded"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{children:"New Report Ready"}),(0,a.jsx)("input",{type:"checkbox",checked:u.newReportReady,onChange:e=>m(t=>({...t,newReportReady:e.target.checked})),className:"rounded"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Product Updates"}),(0,a.jsx)("input",{type:"checkbox",checked:u.productUpdates,onChange:e=>m(t=>({...t,productUpdates:e.target.checked})),className:"rounded"})]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-neutral-200",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-2 font-medium",children:"Do Not Disturb"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{type:"time",value:u.dndStart,onChange:e=>m(t=>({...t,dndStart:e.target.value})),className:"px-2 py-1 rounded border border-neutral-200/70 text-xs"}),(0,a.jsx)("input",{type:"time",value:u.dndEnd,onChange:e=>m(t=>({...t,dndEnd:e.target.value})),className:"px-2 py-1 rounded border border-neutral-200/70 text-xs"})]})]}),(0,a.jsx)("button",{onClick:()=>void p(),className:"mt-3 w-full px-3 py-2 text-sm rounded-md border border-neutral-200/70 hover:bg-neutral-50 transition",children:"Save Preferences"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("button",{onClick:()=>void h(),className:"px-3 py-2 text-sm rounded-md border border-neutral-200/70",children:"Mark all as read"})}),i&&(0,a.jsx)("p",{className:"text-xs mb-2",children:i}),(0,a.jsx)("ul",{className:"space-y-2 text-sm",children:t.map(e=>(0,a.jsx)("li",{className:"rounded-md border px-3 py-2 ".concat(e.read?"border-neutral-200/70 bg-white/60":"border-orange-200 bg-orange-50"),children:e.text},e.id))})]})]})})})}},6269:(e,t,s)=>{Promise.resolve().then(s.bind(s,4361))},9647:(e,t,s)=>{"use strict";s.d(t,{I:()=>d,s:()=>l});var a=s(5155),n=s(2115);let r=(0,n.createContext)(null),c=async e=>{let t=await fetch("/locales/".concat(e,".json"),{cache:"force-cache"});try{let e=await t.json();return null!=e?e:{}}catch(e){return{}}};function d(e){let{children:t}=e,[s,d]=(0,n.useState)(()=>localStorage.getItem("rvn_locale")||"en"),[l,i]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=!0;(async()=>{let t=await c(s);e&&i(t)})();try{localStorage.setItem("rvn_locale",s)}catch(e){}try{document.documentElement.setAttribute("lang",s)}catch(e){}return()=>{e=!1}},[s]);let o=(0,n.useMemo)(()=>e=>{var t;return null!=(t=l[e])?t:e},[l]),u=(0,n.useMemo)(()=>({locale:s,setLocale:d,t:o}),[s,o]);return(0,a.jsx)(r.Provider,{value:u,children:t})}function l(){let e=(0,n.useContext)(r);if(!e)throw Error("useI18n must be used within LanguageProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[5206,7347,6874,8231,8441,1684,7358],()=>t(6269)),_N_E=e.O()}]);