(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{1152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var n=s(5155),a=s(6310),r=s(5886),i=s(2115),o=s(9984),l=s(7347),c=s(7813),d=s(4656);function x(){let[e,t]=(0,i.useState)([]),[s,x]=(0,i.useState)("read"),[u,m]=(0,i.useState)([]),[b,h]=(0,i.useState)(""),[g,p]=(0,i.useState)(["verification.completed"]),[f,v]=(0,i.useState)({connected:!1,email:null,auto_save:!1}),[j,N]=(0,i.useState)(!1),[y,w]=(0,i.useState)([]),[k,C]=(0,i.useState)({isOpen:!1,onConfirm:()=>{}}),A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=Date.now().toString();w(n=>[...n,{id:s,message:e,type:t}])};async function D(){v(await o.G.integrations.getDriveStatus())}(0,i.useEffect)(()=>{D(),t([{id:"key_123",last4:"abcd",createdAt:new Date().toISOString(),scope:"read"}]),m([{id:"wh_123",url:"https://example.com/webhooks/vendor",events:["verification.completed"]}])},[]);let S=async()=>{N(!0);try{await o.G.integrations.connectDrive(),await D(),A("Google Drive connected successfully!","success")}catch(e){A("Failed to connect Google Drive","error")}finally{N(!1)}},G=async e=>{N(!0);try{await o.G.integrations.setAutoSave(e),await D(),A("Auto-save ".concat(e?"enabled":"disabled"),"success")}catch(e){A("Failed to update auto-save setting","error")}finally{N(!1)}};async function _(){await o.G.integrations.createKey(s)}async function I(e){await o.G.integrations.revokeKey(e)}async function O(){await o.G.integrations.createWebhook(b,g)}async function E(e){await o.G.integrations.testWebhook(e)}return(0,n.jsx)(a.A,{allowedRoles:["user"],children:(0,n.jsxs)(r.A,{title:"Integrations",subtitle:"Manage API keys, webhooks, and external storage",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-900 mb-4 uppercase tracking-wider",children:"Connected Apps"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-neutral-200/70 p-5 hover:shadow-md transition-shadow",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-lg bg-neutral-50 flex items-center justify-center text-blue-500",children:(0,n.jsx)(l.In,{icon:"mdi:google-drive",width:24})}),f.connected?(0,n.jsx)("span",{className:"px-2 py-1 rounded-full bg-green-50 text-green-700 text-[10px] font-medium border border-green-100",children:"Connected"}):(0,n.jsx)("button",{onClick:S,disabled:j,className:"px-3 py-1.5 rounded-md bg-neutral-900 text-white text-xs font-medium hover:bg-neutral-800 transition-colors disabled:opacity-50",children:"Connect"})]}),(0,n.jsx)("h4",{className:"font-semibold text-neutral-900 text-sm mb-1",children:"Google Drive"}),f.connected&&f.email&&(0,n.jsxs)("p",{className:"text-xs text-neutral-600 mb-2",children:["Connected as: ",f.email]}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:(f.connected,"Store reports automatically")}),f.connected&&(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-neutral-100",children:[(0,n.jsxs)("label",{className:"flex items-center justify-between cursor-pointer",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs font-medium text-neutral-900",children:"Auto-save all new reports"}),(0,n.jsx)("p",{className:"text-[10px] text-neutral-500 mt-0.5",children:"Automatically save reports to Drive"})]}),(0,n.jsxs)("div",{className:"w-11 h-6 rounded-full transition-colors duration-200 ease-in-out relative ".concat(f.auto_save?"bg-orange-500":"bg-neutral-200"),children:[(0,n.jsx)("input",{type:"checkbox",className:"sr-only",checked:f.auto_save,onChange:e=>G(e.target.checked),disabled:j}),(0,n.jsx)("span",{className:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out ".concat(f.auto_save?"translate-x-5":"translate-x-0")})]})]}),(0,n.jsx)("button",{onClick:()=>{C({isOpen:!0,onConfirm:async()=>{N(!0);try{await o.G.integrations.disconnectDrive(),await D(),A("Google Drive disconnected","success")}catch(e){A("Failed to disconnect","error")}finally{N(!1),C({isOpen:!1,onConfirm:()=>{}})}}})},disabled:j,className:"mt-3 w-full px-3 py-1.5 rounded-md border border-red-200 text-red-600 text-xs font-medium hover:bg-red-50 transition-colors disabled:opacity-50",children:"Disconnect"})]})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"rounded-xl border border-neutral-200/70 bg-white p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-neutral-900",children:"API Keys"}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Manage access tokens for your applications."})]}),(0,n.jsxs)("button",{onClick:()=>void _(),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-orange-50 text-orange-600 text-xs font-medium hover:bg-orange-100 transition-colors",children:[(0,n.jsx)(l.In,{icon:"mdi:plus",width:14})," Generate"]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[e.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-neutral-100 bg-neutral-50/50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded bg-white border border-neutral-200 flex items-center justify-center text-neutral-400",children:(0,n.jsx)(l.In,{icon:"mdi:key-variant",width:16})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("code",{className:"text-sm font-mono text-neutral-700",children:["sk_live_...",e.last4]}),(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-neutral-200 text-neutral-600 text-[10px] uppercase font-medium",children:e.scope})]}),(0,n.jsxs)("p",{className:"text-[10px] text-neutral-400",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,n.jsx)("button",{onClick:()=>void I(e.id),className:"text-neutral-400 hover:text-red-500 transition-colors p-1",children:(0,n.jsx)(l.In,{icon:"mdi:delete-outline",width:18})})]},e.id)),0===e.length&&(0,n.jsx)("div",{className:"text-center py-8 text-neutral-400 text-sm",children:"No active API keys found."})]})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-neutral-200/70 bg-white p-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-neutral-900",children:"Webhooks"}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Listen for real-time events."})]})}),(0,n.jsx)("div",{className:"space-y-4 mb-6",children:u.map(e=>(0,n.jsxs)("div",{className:"p-3 rounded-lg border border-neutral-100 bg-neutral-50/50",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,n.jsx)("p",{className:"text-sm font-medium text-neutral-900 truncate max-w-[200px]",children:e.url})]}),(0,n.jsx)("button",{onClick:()=>void E(e.id),className:"text-xs text-blue-600 hover:underline",children:"Test"})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:e.events.map(e=>(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-white border border-neutral-200 text-neutral-500 text-[10px] font-mono",children:e},e))})]},e.id))}),(0,n.jsxs)("div",{className:"pt-4 border-t border-neutral-100",children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-neutral-700 mb-2",children:"Add Endpoint"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,n.jsx)("input",{value:b,onChange:e=>h(e.target.value),placeholder:"https://api.yoursite.com/webhooks",className:"flex-1 px-3 py-2 rounded-lg border border-neutral-200 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"}),(0,n.jsx)("button",{onClick:()=>void O(),className:"px-4 py-2 rounded-lg bg-neutral-900 text-white text-sm font-medium hover:bg-neutral-800",children:"Add"})]}),(0,n.jsx)("p",{className:"text-xs text-neutral-500 mb-2",children:"Subscribe to events:"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["verification.started","verification.completed","invoice.paid","invoice.failed"].map(e=>(0,n.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded border border-neutral-100 hover:bg-neutral-50 cursor-pointer transition-colors",children:[(0,n.jsx)("input",{type:"checkbox",checked:g.includes(e),onChange:t=>p(s=>t.target.checked?[...s,e]:s.filter(t=>t!==e)),className:"rounded border-neutral-300 text-orange-600 focus:ring-orange-500 w-3.5 h-3.5"}),(0,n.jsx)("span",{className:"text-xs text-neutral-600 font-mono",children:e})]},e))})]})]})]}),(0,n.jsx)(c.N,{toasts:y,removeToast:e=>{w(t=>t.filter(t=>t.id!==e))}}),(0,n.jsx)(d.A,{isOpen:k.isOpen,title:"Disconnect Google Drive?",message:"Are you sure you want to disconnect Google Drive? Auto-saved reports will stop.",confirmText:"Disconnect",cancelText:"Cancel",confirmVariant:"danger",onConfirm:k.onConfirm,onCancel:()=>C({isOpen:!1,onConfirm:()=>{}})})]})})}},4582:(e,t,s)=>{Promise.resolve().then(s.bind(s,1152))},7813:(e,t,s)=>{"use strict";s.d(t,{N:()=>c});var n=s(5155),a=s(2115),r=s(5206),i=s(9114),o=s(7347);function l(e){let{message:t,type:s="info",duration:i=5e3,onClose:l}=e;(0,a.useEffect)(()=>{let e=setTimeout(()=>{l()},i);return()=>clearTimeout(e)},[i,l]);let c={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-600"},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"}}[s];return(0,n.jsxs)(r.P.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"fixed bottom-6 right-6 z-50 max-w-md ".concat(c.bg," ").concat(c.border," border rounded-lg shadow-lg p-4 flex items-start gap-3"),role:"alert",children:[(0,n.jsx)(o.In,{icon:{success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"}[s],width:20,className:"".concat(c.icon," flex-shrink-0 mt-0.5")}),(0,n.jsx)("p",{className:"flex-1 text-sm font-medium ".concat(c.text),children:t}),(0,n.jsx)("button",{onClick:l,className:"".concat(c.text," hover:opacity-70 transition-opacity"),"aria-label":"Close notification",children:(0,n.jsx)(o.In,{icon:"mdi:close",width:18})})]})}function c(e){let{toasts:t,removeToast:s}=e;return(0,n.jsx)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2",children:(0,n.jsx)(i.N,{children:t.map(e=>(0,n.jsx)(l,{message:e.message,type:e.type,onClose:()=>s(e.id)},e.id))})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5206,7347,6874,8231,4656,8441,1684,7358],()=>t(4582)),_N_E=e.O()}]);