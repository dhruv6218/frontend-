(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4779],{4548:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(8097),s=r(2085),l=r(5366);function n(e){let{columns:t,data:r,pageSize:n=8,searchable:i=!0}=e,[c,d]=(0,s.useState)(1),[u,o]=(0,s.useState)(null),[m,x]=(0,s.useState)("asc"),[h,p]=(0,s.useState)(""),b=(0,s.useMemo)(()=>{let e=h.trim().toLowerCase(),t=r;return e&&(t=t.filter(t=>Object.values(t).some(t=>String(t).toLowerCase().includes(e)))),u&&(t=[...t].sort((e,t)=>{let r=e[u],a=t[u];return r===a?0:"asc"===m?String(r)>String(a)?1:-1:String(r)<String(a)?1:-1})),t},[r,h,u,m]),f=Math.max(1,Math.ceil(b.length/n)),g=(c-1)*n,y=b.slice(g,g+n);return(0,a.jsxs)("div",{className:"w-full",children:[i&&(0,a.jsx)("div",{className:"mb-2 flex items-center",children:(0,a.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,a.jsx)(l.In,{icon:"mdi:magnify",width:18,className:"absolute left-2 top-1/2 -translate-y-1/2 text-neutral-500"}),(0,a.jsx)("input",{value:h,onChange:e=>{p(e.target.value),d(1)},placeholder:"Search…",className:"pl-7 pr-2 py-1.5 text-sm rounded-md border border-neutral-200/70 bg-white/80 w-full"})]})}),(0,a.jsx)("div",{className:"overflow-auto border border-neutral-200/70 rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-neutral-50",children:(0,a.jsx)("tr",{children:t.map(e=>(0,a.jsx)("th",{className:"text-left font-normal px-3 py-2 border-b border-neutral-200/70",children:(0,a.jsxs)("button",{className:"inline-flex items-center gap-1 hover:underline",onClick:()=>{u===e.key&&x(e=>"asc"===e?"desc":"asc"),o(e.key)},children:[(0,a.jsx)("span",{children:e.header}),u===e.key&&(0,a.jsx)(l.In,{icon:"asc"===m?"mdi:arrow-up":"mdi:arrow-down",width:14})]})},String(e.key)))})}),(0,a.jsx)("tbody",{children:y.map((e,r)=>(0,a.jsx)("tr",{className:"odd:bg-white even:bg-neutral-50/60",children:t.map(t=>{var r;return(0,a.jsx)("td",{className:"px-3 py-2 border-b border-neutral-200/60",children:t.render?t.render(e):String(null!=(r=e[t.key])?r:"")},String(t.key))})},r))})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:["Page ",c," of ",f]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:1===c,onClick:()=>d(e=>Math.max(1,e-1)),children:"Prev"}),(0,a.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:c===f,onClick:()=>d(e=>Math.min(f,e+1)),children:"Next"})]})]})]})}},5834:(e,t,r)=>{Promise.resolve().then(r.bind(r,9566))},5943:(e,t,r)=>{"use strict";r.d(t,{I:()=>i,s:()=>c});var a=r(8097),s=r(2085);let l=(0,s.createContext)(null),n=async e=>{let t=await fetch("/locales/".concat(e,".json"),{cache:"force-cache"});try{let e=await t.json();return null!=e?e:{}}catch(e){return{}}};function i(e){let{children:t}=e,[r,i]=(0,s.useState)(()=>localStorage.getItem("rvn_locale")||"en"),[c,d]=(0,s.useState)({});(0,s.useEffect)(()=>{let e=!0;(async()=>{let t=await n(r);e&&d(t)})();try{localStorage.setItem("rvn_locale",r)}catch(e){}try{document.documentElement.setAttribute("lang",r)}catch(e){}return()=>{e=!1}},[r]);let u=(0,s.useMemo)(()=>e=>{var t;return null!=(t=c[e])?t:e},[c]),o=(0,s.useMemo)(()=>({locale:r,setLocale:i,t:u}),[r,u]);return(0,a.jsx)(l.Provider,{value:o,children:t})}function c(){let e=(0,s.useContext)(l);if(!e)throw Error("useI18n must be used within LanguageProvider");return e}},9566:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(8097),s=r(5806),l=r(5189),n=r(4548),i=r(2085),c=r(5943),d=r(3563);function u(){let{t:e}=(0,c.s)(),[t,r]=(0,i.useState)(""),[u,o]=(0,i.useState)([]),[m,x]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1);async function b(){o((await d.G.verifications.list()).filter(e=>"din"===e.type).map(e=>{var t,r,a,s,l,n,i;return{din:String(null!=(s=null==(t=e.payload)?void 0:t.din)?s:""),director:String(null!=(l=null==(r=e.result)?void 0:r.director_name)?l:"—"),company:String(null!=(n=null==(a=e.result)?void 0:a.company_name)?n:"—"),status:String(null!=(i=e.status)?i:"—"),risk:0}}))}(0,i.useEffect)(()=>{b()},[]);let f=async e=>{e.preventDefault(),p(!0),x(null);try{await d.G.verifications.create("din",{din:t}),x("DIN verification completed."),await b()}catch(e){x(e.message)}finally{p(!1)}};return(0,a.jsx)(s.A,{allowedRoles:["user"],children:(0,a.jsxs)(l.A,{title:e("verify.din.title"),subtitle:e("verify.din.subtitle"),children:[(0,a.jsxs)("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-neutral-600",children:e("verify.din.input")}),(0,a.jsx)("input",{value:t,onChange:e=>r(e.target.value.replace(/\D/g,"").slice(0,8)),required:!0,minLength:8,maxLength:8,pattern:"\\\\d{8}",placeholder:"12345678",className:"w-full px-3 py-2 rounded-md border border-neutral-200/70 text-sm"}),(0,a.jsx)("p",{className:"text-[11px] text-neutral-500 mt-1",children:"8 digits, numeric only"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{disabled:h,type:"submit",className:"w-full px-3 py-2 rounded-md text-white bg-orange-600 disabled:opacity-50",children:h?"Checking\x1a":e("verify.check")})})]}),m&&(0,a.jsx)("p",{className:"text-xs mb-2",children:m}),(0,a.jsx)("p",{className:"text-sm mb-2",style:{fontFamily:"var(--font-geist)",fontWeight:600},children:"Recent DIN checks"}),(0,a.jsx)(n.A,{columns:[{key:"din",header:"DIN"},{key:"director",header:"Director"},{key:"company",header:"Company"},{key:"status",header:"Status"},{key:"risk",header:"Risk"}],data:u})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9765,5366,1780,8292,7349,1958,7358],()=>t(5834)),_N_E=e.O()}]);