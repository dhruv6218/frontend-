(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5534],{471:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(8097),l=t(5806),r=t(5189),d=t(4548),n=t(2085),i=t(3563);function c(){let[e,a]=(0,n.useState)(""),[t,c]=(0,n.useState)(""),[u,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(""),[f,j]=(0,n.useState)("");async function v(){o((await i.G.verifications.list()).filter(e=>e.type.startsWith("aadhaar")).map(e=>{var a;return{masked:(null==(a=e.payload)?void 0:a.aadhaar)?String(e.payload.aadhaar).replace(/\d(?=\d{4})/g,"*"):"—",status:e.status,method:"OTP",risk:0}}))}(0,n.useEffect)(()=>{v()},[]);let y=async a=>{a.preventDefault(),p(!0),x(null);try{var s,l,r;let a=null!=(s=(await i.G.verifications.create("aadhaar_send_otp",{aadhaar:t||e})).result)?s:{},d=String(null!=(r=null!=(l=a.ReqId)?l:a.reqId)?r:"");d&&j(d),x("OTP sent to Aadhaar-linked mobile. Enter OTP below to complete."),await v()}catch(e){x(e.message)}finally{p(!1)}},N=async a=>{a.preventDefault(),p(!0),x(null);try{await i.G.verifications.create("aadhaar_submit_otp",{aadhaar:t||e,otp:b,reqId:f}),x("Aadhaar verified successfully."),g(""),j(""),await v()}catch(e){x(e.message)}finally{p(!1)}};return(0,s.jsx)(l.A,{allowedRoles:["user"],children:(0,s.jsxs)(r.A,{title:"Aadhaar Verification",subtitle:"Use VID or Aadhaar; results are masked for privacy",children:[(0,s.jsxs)("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-600",children:"Aadhaar (12 digits)"}),(0,s.jsx)("input",{value:e,onChange:e=>a(e.target.value.replace(/[^0-9]/g,"").slice(0,12)),inputMode:"numeric",placeholder:"123412341234",className:"w-full px-3 py-2 rounded-md border border-neutral-200/70 text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-600",children:"VID (Virtual ID, optional)"}),(0,s.jsx)("input",{value:t,onChange:e=>c(e.target.value),placeholder:"XXXX-XXXX-XXXX-XXXX",className:"w-full px-3 py-2 rounded-md border border-neutral-200/70 text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{disabled:h,type:"submit",className:"w-full px-3 py-2 rounded-md text-white bg-orange-600 disabled:opacity-50",children:h?"Sending…":"Send OTP"})})]}),(0,s.jsxs)("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-600",children:"ReqId"}),(0,s.jsx)("input",{value:f,onChange:e=>j(e.target.value),placeholder:"Auto-filled after Send OTP",className:"w-full px-3 py-2 rounded-md border border-neutral-200/70 text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-600",children:"OTP"}),(0,s.jsx)("input",{value:b,onChange:e=>g(e.target.value.replace(/[^0-9]/g,"").slice(0,6)),inputMode:"numeric",placeholder:"Enter 6-digit OTP",className:"w-full px-3 py-2 rounded-md border border-neutral-200/70 text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{disabled:h||!f||!b,type:"submit",className:"w-full px-3 py-2 rounded-md text-white bg-orange-600 disabled:opacity-50",children:h?"Verifying…":"Submit OTP"})})]}),m&&(0,s.jsx)("p",{className:"text-xs mb-2",children:m}),(0,s.jsx)("p",{className:"text-sm mb-2",style:{fontFamily:"var(--font-geist)",fontWeight:600},children:"Recent Aadhaar checks"}),(0,s.jsx)(d.A,{columns:[{key:"masked",header:"Aadhaar"},{key:"status",header:"Status"},{key:"method",header:"Method"},{key:"risk",header:"Risk"}],data:u})]})})}},4548:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(8097),l=t(2085),r=t(5366);function d(e){let{columns:a,data:t,pageSize:d=8,searchable:n=!0}=e,[i,c]=(0,l.useState)(1),[u,o]=(0,l.useState)(null),[m,x]=(0,l.useState)("asc"),[h,p]=(0,l.useState)(""),b=(0,l.useMemo)(()=>{let e=h.trim().toLowerCase(),a=t;return e&&(a=a.filter(a=>Object.values(a).some(a=>String(a).toLowerCase().includes(e)))),u&&(a=[...a].sort((e,a)=>{let t=e[u],s=a[u];return t===s?0:"asc"===m?String(t)>String(s)?1:-1:String(t)<String(s)?1:-1})),a},[t,h,u,m]),g=Math.max(1,Math.ceil(b.length/d)),f=(i-1)*d,j=b.slice(f,f+d);return(0,s.jsxs)("div",{className:"w-full",children:[n&&(0,s.jsx)("div",{className:"mb-2 flex items-center",children:(0,s.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,s.jsx)(r.In,{icon:"mdi:magnify",width:18,className:"absolute left-2 top-1/2 -translate-y-1/2 text-neutral-500"}),(0,s.jsx)("input",{value:h,onChange:e=>{p(e.target.value),c(1)},placeholder:"Search…",className:"pl-7 pr-2 py-1.5 text-sm rounded-md border border-neutral-200/70 bg-white/80 w-full"})]})}),(0,s.jsx)("div",{className:"overflow-auto border border-neutral-200/70 rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-neutral-50",children:(0,s.jsx)("tr",{children:a.map(e=>(0,s.jsx)("th",{className:"text-left font-normal px-3 py-2 border-b border-neutral-200/70",children:(0,s.jsxs)("button",{className:"inline-flex items-center gap-1 hover:underline",onClick:()=>{u===e.key&&x(e=>"asc"===e?"desc":"asc"),o(e.key)},children:[(0,s.jsx)("span",{children:e.header}),u===e.key&&(0,s.jsx)(r.In,{icon:"asc"===m?"mdi:arrow-up":"mdi:arrow-down",width:14})]})},String(e.key)))})}),(0,s.jsx)("tbody",{children:j.map((e,t)=>(0,s.jsx)("tr",{className:"odd:bg-white even:bg-neutral-50/60",children:a.map(a=>{var t;return(0,s.jsx)("td",{className:"px-3 py-2 border-b border-neutral-200/60",children:a.render?a.render(e):String(null!=(t=e[a.key])?t:"")},String(a.key))})},t))})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsxs)("p",{className:"text-xs text-neutral-500",children:["Page ",i," of ",g]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:1===i,onClick:()=>c(e=>Math.max(1,e-1)),children:"Prev"}),(0,s.jsx)("button",{className:"px-2 py-1 text-xs rounded border border-neutral-200/70",disabled:i===g,onClick:()=>c(e=>Math.min(g,e+1)),children:"Next"})]})]})]})}},8163:(e,a,t)=>{Promise.resolve().then(t.bind(t,471))}},e=>{var a=a=>e(e.s=a);e.O(0,[9765,5366,1780,8292,7349,1958,7358],()=>a(8163)),_N_E=e.O()}]);